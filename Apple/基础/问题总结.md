# 问题总结

<!-- create time: 2015-01-11 20:28:38  -->

##问题00001 __关于不小心覆盖父类值的Accessor 和 Mutator的情况

####1. 不要在子类添加@synthesize xxx = _xxx; 
 子类点语法将不会调用父类的get set方法

####2. 不能在init和dealloc中使用accessor[详见nswish 的博客](http://my.oschina.net/nswish/blog/298603)

是因为我们要提防：子类有可能会覆盖父类的accessor方法，从而改变accessor方法的行为。

##问题00002 __关于tableView中NSFetchedResultsChangeMove情况的处理

往往NSFetchedResultsController关联TableView数据源，需要处理其发生变化的情况，在didChangeObject的代理方法中处理row的改变情况，其中NSFetchedResultsChangeMove的处理
####错误:

	 [self.tableView moveRowAtIndexPath:indexPath toIndexPath:newIndexPath];

####正确: 先删除在插入

	[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationBottom];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationTop];
    
##问题00003 __关于CocoaPods requires your terminal to be using UTF-8 encoding.

处理：把Podfile的编码改为utf8，在运行相关pod命令前执行export LANG=en_US.UTF-8，或者直接加到shell相关配置的地方都可以。

##问题00004 __关于UITextField的Value改变时，KVO失效(IOS 8)

Apple关于KVO的文档有如下声明:
Although the classes of the UIKit framework generally do not support KVO, you can still implement it in the custom objects of your application, including custom views.

虽然UIKit框架中普遍不支持KVO，你仍然可以在你的应用里自定义对象中包括这些View

监听UITextField 变化的方法:

* addTarget:action:forControlEvents: (RAC中用此解决)
* NSNotificationCenter



##问题00005 __C语言指针 Array type 'char [20]' is not assignable

[c语言与指针](http://blog.csdn.net/cooljune/article/details/18809179)

    char temp[20];
    temp = "zylcold" //Error  Array type 'char [20]' is not assignable
错误原因是temp是一个常量，代表数组地址即第一个元素的地址，我们不能对一个常量进行赋值
     
    char *temp = "zylcold";
    temp = "Hello"; //Error!
    temp = 'A'; // Error!
    
解决: C语言库函数 strcpy() / stmcpy()

    strcpy(temp, "Hello World");
    
##问题00006 __C++11中关于char * 和 string转换

    char *demo[] = {"zylcold", "hello"};
    //Error! ISO C++11 does not allow conversion from string literal to 'char *'
    
 改正:
 
    string demo[] = {"zylcold", "hello"};
    
##问题00007 __too few template arguments for class template 'map'
    
    
    //提示
    map<string , int>mapstring;
    template is declared here
    template <class, class, class, class> friend class _LIBCPP_TYPE_VIS_ONLY map;
    
    没有导入<map>头文件
	
##问题00008 __Unsupported URL in NSURLRequest

	Try adding http:// to the start of the URL
	
	
##问题00009 __修改UINavigationController title 字体的颜色

	self.navigationController.navigationBar.titleTextAttributes = @{
	                                                                 NSForegroundColorAttributeName : [NSColor redColor]
	                                                                };
																	
##问题00010 __时间转换问题yyyy-MM-dd / YYYY-MM-DD ?

	描述:
	
	var str = "2015-03-28"
	var date = NSDate()
	var fms = NSDateFormatter()
	fms.dateFormat = "yyyy-MM-DD"
	date = fms.dateFromString(str)!   -> Jan 28, 2015, 12:00 AM
	fms.dateFormat = "YYYY年MM月"    
	fms.stringFromDate(date)          -> 2015年1月
	
	问题2015-03-28的日期格式应该为 yyyy-MM-dd

[日期格式化部分解释](http://blog.sina.com.cn/s/blog_8020e41101014sy2.html)
	
##问题00011 __Collection <__NSArrayM: 0xb550c30> was mutated while being enumerated

	NSArray * array = [NSArray arrayWithArray: arrayTemp];
 
	for (NSDictionary * dic in array) {
	   if (condition){
	      [arrayTemp removeObject:dic];
	   }
	}
	
	错误。不能在遍历数组的同时，增加或删除数组内的数据。


##问题00012 __didMoveToSuperview和awakeFromNib的xuan ze

	//- (void)didMoveToSuperview   //从Xib创建View时，此时View信息为nil
	//{
	//    _labelToTopHeight.constant *= [ScreenFactor factorForAutoHeight];
	//}
	
	- (void)awakeFromNib
	{
	    _labelToTopHeight.constant *= [ScreenFactor factorForAutoHeight];
	}
	
	
##问题00013 __ld: framework not found CoreImage for architecture arm64

	Build Sitting -> Architectures -> Base SDK -> 设置为手机当前版本
	
	
	
##问题00014 __UITableView 中TableViewHeadView移除问题

	TableViewHeadView移除时，TableView仍然留白。
	tableView.tableViewHeadView = nil; 也无效
	
	解决方案：
	
	tableView.tableHeaderView = ({
	            UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 365, 0.1)];
	            view.backgroundColor = [UIColor yellowColor];
	            view;
	});
	用高度为0.1的View代替
	
	
##问题00015 __iOS9中 load an HTTP URL with App Transport Security enabled 

	You can add exceptions for specific domains in your Info.plist:
		
		<key>NSAppTransportSecurity</key>
		<dict>
		    <key>NSExceptionDomains</key>
		    <dict>
		        <key>testdomain.com</key>
		        <dict>
		            <key>NSIncludesSubdomains</key>
		            <false/>
		            <key>NSExceptionAllowInsecureHTTPSLoads</key>
		            <false/>
		            <key>NSExceptionRequiresForwardSecrecy</key>
		            <true/>
		            <key>NSExceptionMinimumTLSVersion</key>
		            <string>TLSv1.2</string>
		            <key>NSThirdPartyExceptionAllowInsecureHTTPSLoads</key>
		            <false/>
		            <key>NSThirdPartyExceptionRequiresForwardSecrecy</key>
		            <true/>
		            <key>NSThirdPartyExceptionMinimumTLSVersion</key>
		            <string>TLSv1.2</string>
		            <key>NSRequiresCertificateTransparency</key>
		            <false/>
		        </dict>

		        ...

		    </dict>
		</dict>
		
	You can also ignore all app transport security restrictions with a single key:

	<key>NSAppTransportSecurity</key>
	<dict>
	    <key>NSAllowsArbitraryLoads</key>
	    <true/>
	</dict>
	
	Further details will follow in the “Networking with NSURLSession” session.
[How do I load an HTTP URL with App Transport Security enabled in iOS 9?](http://stackoverflow.com/questions/30731785/how-do-i-load-an-http-url-with-app-transport-security-enabled-in-ios-9)


##问题00016 preferredStatusBarStyle不执行

	此法的只有在设置了以下代码才会被调用（对于preferredStatusBarStyle不执行问题）：
	[self.navigationController.navigationBar setBarStyle:UIBarStyleBlack];
	
	在iOS 7中，通过上面的方法来修改状态栏风格非常的棒。
	另外，我们也可以使用UIApplication的statusBarStyle方法来设置状态栏，不过，首先需要停止使用View controller-based status bar appearance。
	在project target的Info tab中，插入一个新的key，名字为View controller-based status bar appearance，并将其值设置为NO。
	
	然后就可以使用下面的代码来设置状态栏风格了：
	[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleLightContent];

[iOS 7 修改状态栏preferredStatusBarStyle不执行问题](http://m.blog.csdn.net/blog/zqx654033799/23597509)

##问题00017 隐藏TabBar后，点击原来TabBar位置不响应

	控制器设置了 self.edgesForExtendedLayout = UIRectEdgeNone;
	
	
##问题00018 控制器的屏幕方向问题

[单独控制控制器旋转](http://www.devdiv.com/forum.php?mod=viewthread&tid=144725)
	
	
##问题00019 zsh: command not found: brew

配置~/.zshrc 

//# User configuration
export PATH="rvm/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"


##问题00020 git checkout -- .  反悔

被添加到 index 的内容可以找回（Git add）（但是只有文件内容，没有文件名信息，需要人工辨别），没有被添加的部分已经被删除了，你只能求助于另外的办法（备份文件、反删除恢复等）。

如果stage(add)过，还可能可以恢复（前提是不能运行git gc）： 使用 git fsck --lost-found 找到 dangling blob，然后使用 git show <sha_id> 看看这个文件是不是你之前被恢复的。

然后去.git/lost-found/other就能找到blob, 手动恢复。。